---
id: 01-factory
title: Factory
tags: smart-contracts, documentation
---

# Factory

## Code

[`Factory.sol`](https://github.com/PulsarSwap/TWAMM-Contracts/blob/master/contracts/Factory.sol)

# Address

`Factory` is deployed at `0x408f66057163d829a30d4d466092c6b0eebb692f` on the Ethereum [mainnet](https://etherscan.io/address/0x408f66057163d829a30d4d466092c6b0eebb692f).

# Events

## PairCreated

```solidity
event PairCreated(
        address indexed tokenA,
        address indexed tokenB,
        address pair,
        uint256
    );
```

Emitted each time a pair is created via [createPair](#createpair).

- `tokenA` is guaranteed to be strictly less than `tokenB` by sort order.
- The final `uint256` log value will be `1` for the first pair created, `2` for the second, etc. (see [allPairs](#allpairs) / [getPair](#getpair)).

# Read-Only Functions

## getPair

```solidity
function getPair(
        address token0,
        address token1
    ) external view returns (address pair);
```

Returns the address of the pair for `token0` and `token1`, if it has been created, else `address(0)` (`0x0000000000000000000000000000000000000000`).

- `token0` and `token1` are interchangeable.
- Pair addresses can also be calculated deterministically.

## allPairs

```solidity
function allPairs(uint256) external view returns (address pair);
```

Returns the address of the `n`th pair (`0`-indexed) created through the factory, or `address(0)` (`0x0000000000000000000000000000000000000000`) if not enough pairs have been created yet.

- Pass `0` for the address of the first pair created, `1` for the second, etc.

## allPairsLength

```solidity
function allPairsLength() external view returns (uint256);
```

Returns the total number of pairs created through the factory so far.

## feeTo

```solidity
function feeTo() external view returns (address);
```

[`feeTo`](https://etherscan.io/address/0xb8688826e957ece1fbf8f6203d025c5624286bae)
is a gnosis-safe wallet that is specified in the Pulsar contract to receive the swap fees from the liquidity pools. This allows the protocol to earn passive income from the fees generated by the liquidity pools.

The feeTo address can be set or changed by the [feeToSetter](#feeToSetter).

See [Protocol Charge Calculation](../../concepts/03-advanced-topics/07-fees.md).

## feeArg

```solidity
function feeArg() external view returns (uint32);
```

`feeArg` represents the proportion of the swap fees that is charged to the protocol's [feeTo](#feeTo) wallet, with a ratio of 1/(feeArg+1). The current feeArg is `1000`.

The feeArg can be set or changed by the [feeToSetter](#feeToSetter).

## feeToSetter

```solidity
function feeToSetter() external view returns (address);
```

The [feeToSetter](https://etherscan.io/address/0x57802b223F76Afd6E51Bb2AF578E72B07066a069) address allowed to change [feeTo](#feeto) and [feeArg](#feeArg).

## twammAdd

```solidity
function twammAdd() external view returns (address);
```

This is [`TWAMM.sol`](./06-twamm.md) contract address.

# State-Changing Functions

## createPair

```solidity
function createPair(
        address token0,
        address token1
    ) external returns (address pair);
```

Creates a pair for `token0` and `token1` if one doesn't exist already.

- `token0` and `token1` are interchangeable.
- Emits [PairCreated](#paircreated).

# Interface

[`IFactory.sol`](https://github.com/PulsarSwap/TWAMM-Contracts/blob/master/contracts/interfaces/IFactory.sol)

<!-- ```solidity
// SPDX-License-Identifier: GPL-3.0-or-later

pragma solidity ^0.8.9;

interface IFactory {
    event PairCreated(
        address indexed tokenA,
        address indexed tokenB,
        address pair,
        uint256
    );

    function getPair(
        address token0,
        address token1
    ) external view returns (address pair);

    function allPairs(uint256) external view returns (address pair);

    function feeArg() external view returns (uint32);

    function feeTo() external view returns (address);

    function feeToSetter() external view returns (address);

    function allPairsLength() external view returns (uint256);

    function initialize(address _twammAdd) external;

    function twammAdd() external view returns (address);

    function createPair(
        address token0,
        address token1
    ) external returns (address pair);

    function setFeeArg(uint32) external;

    function setFeeTo(address) external;

    function setFeeToSetter(address) external;
}
``` -->

<!-- # ABI

```typescript
import IUniswapV2Factory from "@uniswap/v2-core/build/IUniswapV2Factory.json";
``` -->
