<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.0">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Quickswap Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Quickswap Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-128182339-7","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="search" type="application/opensearchdescription+xml" title="Quickswap" href="/opensearch.xml"><title data-react-helmet="true">Smart Contract Quick start | Quickswap</title><meta data-react-helmet="true" property="og:url" content="https://quickswap.github.io//guides/smart-contract-integration/01-quick-start"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="V2"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-V2"><meta data-react-helmet="true" property="og:title" content="Smart Contract Quick start | Quickswap"><meta data-react-helmet="true" name="description" content="Developing smart contracts for Ethereum involves a bevy of off-chain tools used for producing and testing bytecode"><meta data-react-helmet="true" property="og:description" content="Developing smart contracts for Ethereum involves a bevy of off-chain tools used for producing and testing bytecode"><link data-react-helmet="true" rel="shortcut icon" href="/img/logo_circle.png"><link data-react-helmet="true" rel="canonical" href="https://quickswap.github.io//guides/smart-contract-integration/01-quick-start"><link data-react-helmet="true" rel="alternate" href="https://quickswap.github.io//guides/smart-contract-integration/01-quick-start" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://quickswap.github.io//guides/smart-contract-integration/01-quick-start" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://S0IDD0YGLZ-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.45e62268.css">
<link rel="preload" href="/assets/js/runtime~main.a011c026.js" as="script">
<link rel="preload" href="/assets/js/main.e22ba48b.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/quickswaplogo.png" alt="Quickswap Dragon" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/quickswaplogo.png" alt="Quickswap Dragon" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Quickswap Documentation</strong></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/QuickSwap/quickswap-docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/">V2</a><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--disabled" role="button" tabindex="-1"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/quickswaplogo.png" alt="Quickswap Dragon" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/quickswaplogo.png" alt="Quickswap Dragon" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Quickswap Documentation</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a href="https://github.com/QuickSwap/quickswap-docs" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li><li class="menu__list-item"><a class="menu__link">Versions</a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo"><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Concepts</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Protocol Overview</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/">How Quickswap works</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/concepts/protocol-overview/02-ecosystem-participants">Ecosystem Participants</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/concepts/protocol-overview/03-smart-contracts">Smart contracts</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/concepts/protocol-overview/04-glossary">Glossary</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Core Concepts</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/concepts/core-concepts/01-swaps">Swaps</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/concepts/core-concepts/02-pools">Pools</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/concepts/core-concepts/03-flash-swaps">Flash Swaps</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/concepts/core-concepts/04-oracles">Introduction</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Advanced Topics</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/concepts/advanced-topics/01-fees">Fees</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/concepts/advanced-topics/02-pricing">How are prices determined?</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/concepts/advanced-topics/03-understanding-returns">Understanding Returns</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/concepts/advanced-topics/04-security">Audit &amp; Formal Verification</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/concepts/advanced-topics/05-math">Math</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/concepts/advanced-topics/06-research">Research</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Governance</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/concepts/governance/01-overview">Code</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/concepts/governance/02-process">Process</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/concepts/governance/03-guide-to-voting">Beginners Guide to Voting</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/concepts/governance/04-glossary">Glossary</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/concepts/governance/05-adversarial-circumstances">Adversarial Circumstances</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/concepts/governance/06-governance-reference">Governance Reference</a></li></ul></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Guides</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Interface Integration</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/guides/interface-integration/01-using-the-api">Using the API</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/guides/interface-integration/02-custom-interface-linking">Query Parameters</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/guides/interface-integration/03-iframe-integration">Iframe Integration</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Javascript SDK</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/guides/javascript-sdk/01-quick-start">SDK Quick start</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/guides/javascript-sdk/02-fetching-data">Fetching Data</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/guides/javascript-sdk/03-pricing">Pricing</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/guides/javascript-sdk/04-trading">Trading</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/guides/javascript-sdk/05-getting-pair-addresses">getPair</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">Smart Contract Integration</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/guides/smart-contract-integration/01-quick-start">Smart Contract Quick start</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/guides/smart-contract-integration/02-trading-from-a-smart-contract">Implement a Swap</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/guides/smart-contract-integration/03-providing-liquidity">Providing Liquidity</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/guides/smart-contract-integration/04-building-an-oracle">Building an Oracle</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/guides/smart-contract-integration/05-using-flash-swaps">Flash Swaps</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/guides/smart-contract-integration/06-getting-pair-addresses">getPair</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/guides/smart-contract-integration/07-supporting-meta-transactions">Supporting meta transactions</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Technical Reference</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">API</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reference/">API Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reference/API/02-entities">Entities</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reference/API/03-queries">Queries</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Governance</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reference/Governance/05-governance-reference">Governance Reference</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">SDK</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reference/SDK/01-getting-started">Getting Started</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reference/SDK/02-token">Token</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reference/SDK/03-pair">Pair</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reference/SDK/04-route">Route</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reference/SDK/05-trade">Trade</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reference/SDK/06-fractions">Fraction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reference/SDK/07-fetcher">Fetcher</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reference/SDK/08-other-exports">JSBI</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Smart Contracts</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reference/smart-contracts/01-factory">Factory</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reference/smart-contracts/pair">Pair</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reference/smart-contracts/pair-erc-20">Pair (ERC-20)</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reference/smart-contracts/library">Library</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reference/smart-contracts/router01">Router01</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reference/smart-contracts/router02">Router02</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reference/smart-contracts/common-errors">Common Errors</a></li></ul></li></ul></li></ul></div></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><header><h1 class="docTitle_3a4h">Smart Contract Quick start</h1></header><div class="markdown"><p>Developing smart contracts for Ethereum involves a bevy of off-chain tools used for producing and testing bytecode
that runs on the <a href="https://eth.wiki/en/concepts/evm/ethereum-virtual-machine-(evm)-awesome-list" target="_blank" rel="noopener noreferrer">Ethereum Virtual Machine (EVM)</a>.
Some tools also include workflows for deploying this bytecode to the Ethereum network and testnets.
There are many options for these tools. This guide walks you through writing and testing a simple smart contract that
interacts with the Uniswap Protocol using one specific set of tools (<code>truffle</code> + <code>npm</code> + <code>mocha</code>).</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="requirements"></a>Requirements<a class="hash-link" href="#requirements" title="Direct link to heading">#</a></h2><p>To follow this guide, you must have the following installed:</p><ul><li><a href="https://nodejs.org/en/" target="_blank" rel="noopener noreferrer">nodejs &gt;= v12.x &amp; npm &gt;= 6.x</a></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="bootstrapping-a-project"></a>Bootstrapping a project<a class="hash-link" href="#bootstrapping-a-project" title="Direct link to heading">#</a></h2><p>You can start from scratch, but it&#x27;s easier to use a tool like <code>truffle</code> to bootstrap an empty project.
Create an empty directory and run <code>npx truffle init</code> inside that directory to unbox the default
<a href="https://www.trufflesuite.com/boxes" target="_blank" rel="noopener noreferrer">Truffle box</a>.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><div tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">mkdir</span><span class="token plain"> demo</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">cd</span><span class="token plain"> demo</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">npx truffle init</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="setting-up-npm"></a>Setting up npm<a class="hash-link" href="#setting-up-npm" title="Direct link to heading">#</a></h2><p>In order to reference the Uniswap V2 contracts, you should use the npm artifacts we deploy containing the core and
periphery smart contracts and interfaces. To add npm dependencies, we first initialize the npm package.
We can run <code>npm init</code> in the same directory to create a <code>package.json</code> file. You can accept all the defaults and
change it later.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><div tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">npm</span><span class="token plain"> init</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="adding-dependencies"></a>Adding dependencies<a class="hash-link" href="#adding-dependencies" title="Direct link to heading">#</a></h2><p>Now that we have an npm package, we can add our dependencies. Let&#x27;s add both the
<a href="https://www.npmjs.com/package/@uniswap/v2-core" target="_blank" rel="noopener noreferrer"><code>@uniswap/v2-core</code></a> and
<a href="https://www.npmjs.com/package/@uniswap/v2-periphery" target="_blank" rel="noopener noreferrer"><code>@uniswap/v2-periphery</code></a> packages.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><div tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">npm</span><span class="token plain"> i --save @uniswap/v2-core</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">npm</span><span class="token plain"> i --save @uniswap/v2-periphery</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>If you check the <code>node_modules/@uniswap</code> directory, you can now find the Uniswap V2 contracts. </p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><div tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">moody@MacBook-Pro ~/I/u/demo</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">ls</span><span class="token plain"> node_modules/@uniswap/v2-core/contracts</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">UniswapV2ERC20.sol    UniswapV2Pair.sol     libraries/</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">UniswapV2Factory.sol  interfaces/           test/</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">moody@MacBook-Pro ~/I/u/demo</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">ls</span><span class="token plain"> node_modules/@uniswap/v2-periphery/contracts/</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">UniswapV2Migrator.sol  examples/              test/</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">UniswapV2Router01.sol  interfaces/</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">UniswapV2Router02.sol  libraries/</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>These packages include both the smart contract source code and the build artifacts.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="writing-our-contract"></a>Writing our contract<a class="hash-link" href="#writing-our-contract" title="Direct link to heading">#</a></h2><p>We can now get started writing our example contract.
For writing Solidity, we recommend IntelliJ or VSCode with a solidity plugin, but you can use any text editor.
Let&#x27;s write a contract that returns the value of some amount of liquidity shares for a given token pair.
First create a couple of files:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><div tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">mkdir</span><span class="token plain"> contracts/interfaces</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">touch</span><span class="token plain"> contracts/interfaces/ILiquidityValueCalculator.sol</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">touch</span><span class="token plain"> contracts/LiquidityValueCalculator.sol</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>This will be the interface of the contract we implement. Put it in <code>contracts/interfaces/ILiquidityValueCalculator.sol</code>.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><div tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">pragma solidity ^0.6.6;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">interface ILiquidityValueCalculator {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    function computeLiquidityShareValue(uint liquidity, address tokenA, address tokenB) external returns (uint tokenAAmount, uint tokenBAmount);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Now let&#x27;s start with the constructor. You need to know where the <code>UniswapV2Factory</code> is deployed in order to compute the
address of the pair and look up the total supply of liquidity shares, plus the amounts for the reserves.
We can store this as an address passed to the constructor.</p><p>The factory address is constant on mainnet and all testnets, so it may be tempting to make this value a constant in your contract,
but since we need to unit test the contract it should be an argument. You can use solidity immutables to save on gas
when accessing this variable.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><div tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">pragma solidity ^0.6.6;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">import &#x27;./interfaces/ILiquidityValueCalculator.sol&#x27;;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">contract LiquidityValueCalculator is ILiquidityValueCalculator {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    address public factory;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    constructor(address factory_) public {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        factory = factory_;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Now we need to be able to look up the total supply of liquidity for a pair, and its token balances.
Let&#x27;s put this in a separate function. To implement it, we must:</p><ol><li>Look up the pair address</li><li>Get the reserves of the pair</li><li>Get the total supply of the pair liquidity</li><li>Sort the reserves in the order of tokenA, tokenB </li></ol><p>The <a href="/reference/smart-contracts/library"><code>UniswapV2Library</code></a> has some helpful methods for this.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><div tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">pragma solidity ^0.6.6;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">import &#x27;./interfaces/ILiquidityValueCalculator.sol&#x27;;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">import &#x27;@uniswap/v2-periphery/contracts/libraries/UniswapV2Library.sol&#x27;;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">import &#x27;@uniswap/v2-core/contracts/interfaces/IUniswapV2Pair.sol&#x27;;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">contract LiquidityValueCalculator is ILiquidityValueCalculator {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    function pairInfo(address tokenA, address tokenB) internal view returns (uint reserveA, uint reserveB, uint totalSupply) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        IUniswapV2Pair pair = IUniswapV2Pair(UniswapV2Library.pairFor(factory, tokenA, tokenB));</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        totalSupply = pair.totalSupply();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        (uint reserves0, uint reserves1,) = pair.getReserves();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        (reserveA, reserveB) = tokenA == pair.token0() ? (reserves0, reserves1) : (reserves1, reserves0);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    } </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Finally we just need to compute the share value. We will leave that as an exercise to the reader.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly solidity"><div tabindex="0" class="prism-code language-solidity codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">pragma solidity ^0.6.6;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">import &#x27;./interfaces/ILiquidityValueCalculator.sol&#x27;;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">import &#x27;@uniswap/v2-periphery/contracts/libraries/UniswapV2Library.sol&#x27;;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">import &#x27;@uniswap/v2-core/contracts/interfaces/IUniswapV2Pair.sol&#x27;;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">contract LiquidityValueCalculator is ILiquidityValueCalculator {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    address public factory;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    constructor(address factory_) public {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        factory = factory_;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    function pairInfo(address tokenA, address tokenB) internal view returns (uint reserveA, uint reserveB, uint totalSupply) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        IUniswapV2Pair pair = IUniswapV2Pair(UniswapV2Library.pairFor(factory, tokenA, tokenB));</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        totalSupply = pair.totalSupply();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        (uint reserves0, uint reserves1,) = pair.getReserves();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        (reserveA, reserveB) = tokenA == pair.token0() ? (reserves0, reserves1) : (reserves1, reserves0);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    function computeLiquidityShareValue(uint liquidity, address tokenA, address tokenB) external override returns (uint tokenAAmount, uint tokenBAmount) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        revert(&#x27;TODO&#x27;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="writing-tests"></a>Writing tests<a class="hash-link" href="#writing-tests" title="Direct link to heading">#</a></h2><p>In order to test your contract, you need to:</p><ol><li>Bring up a testnet</li><li>Deploy the <code>UniswapV2Factory</code></li><li>Deploy at least 2 ERC20 tokens for a pair</li><li>Create a pair for the factory</li><li>Deploy your <code>LiquidityValueCalculator</code> contract</li><li>Call <code>LiquidityValueCalculator#computeLiquidityShareValue</code></li><li>Verify the result with an assertion</li></ol><p>#1 is handled for you automatically by the <code>truffle test</code> command.</p><p>Note you should only deploy the precompiled Uniswap contracts in the <code>build</code> directories for unit tests.
This is because solidity appends a metadata hash to compiled contract artifacts which includes the hash of the contract
source code path, and compilations on other machines will not result in the exact same bytecode.
This is problematic because in Uniswap V2 we use the hash of the bytecode in the v2-periphery
<a href="https://github.com/Uniswap/uniswap-v2-periphery/blob/master/contracts/libraries/UniswapV2Library.sol#L24" target="_blank" rel="noopener noreferrer"><code>UniswapV2Library</code></a>,
to compute the pair address.</p><p>To get the bytecode for deploying UniswapV2Factory, you can import the file via:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly javascript"><div tabindex="0" class="prism-code language-javascript codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token maybe-class-name">UniswapV2FactoryBytecode</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">require</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;@uniswap/v2-core/build/UniswapV2Factory.json&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">bytecode</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>We recommend using a standard ERC20 from <code>@openzeppelin/contracts</code> for deploying an ERC20.</p><p>You can read more about deploying contracts and writing tests using Truffle
<a href="https://www.trufflesuite.com/docs/truffle/testing/writing-tests-in-javascript" target="_blank" rel="noopener noreferrer">here</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="compiling-and-deploying-the-contract"></a>Compiling and deploying the contract<a class="hash-link" href="#compiling-and-deploying-the-contract" title="Direct link to heading">#</a></h2><p>Learn more about compiling and deploying contracts using Truffle
<a href="https://www.trufflesuite.com/docs/truffle/getting-started/compiling-contracts" target="_blank" rel="noopener noreferrer">here</a> and
<a href="https://www.trufflesuite.com/docs/truffle/getting-started/running-migrations" target="_blank" rel="noopener noreferrer">here</a> respectively.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="wip"></a>WIP<a class="hash-link" href="#wip" title="Direct link to heading">#</a></h2><p>This guide is a WIP. Please contribute to this guide with the edit button below!</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/QuickSwap/quickswap-docs/tree/main/versioned_docs/version-V2/guides/smart-contract-integration/01-quick-start.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/guides/javascript-sdk/05-getting-pair-addresses"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« getPair</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/guides/smart-contract-integration/02-trading-from-a-smart-contract"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Implement a Swap Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#requirements" class="table-of-contents__link">Requirements</a></li><li><a href="#bootstrapping-a-project" class="table-of-contents__link">Bootstrapping a project</a></li><li><a href="#setting-up-npm" class="table-of-contents__link">Setting up npm</a></li><li><a href="#adding-dependencies" class="table-of-contents__link">Adding dependencies</a></li><li><a href="#writing-our-contract" class="table-of-contents__link">Writing our contract</a></li><li><a href="#writing-tests" class="table-of-contents__link">Writing tests</a></li><li><a href="#compiling-and-deploying-the-contract" class="table-of-contents__link">Compiling and deploying the contract</a></li><li><a href="#wip" class="table-of-contents__link">WIP</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Ecosystem</h4><ul class="footer__items"><li class="footer__item"><a href="https://uniswap.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Home</a></li><li class="footer__item"><a href="https://quickswap.exchange/" target="_blank" rel="noopener noreferrer" class="footer__link-item">App</a></li><li class="footer__item"><a href="https://info.quickswap.exchange/home" target="_blank" rel="noopener noreferrer" class="footer__link-item">Analytics</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Developers</h4><ul class="footer__items"><li class="footer__item"><a href="https://github.com/Uniswap/uniswap-v3-periphery/blob/main/bug-bounty.md" target="_blank" rel="noopener noreferrer" class="footer__link-item">Bug Bounty</a></li><li class="footer__item"><a href="https://github.com/QuickSwap/quickswap-core" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub | Protocol</a></li><li class="footer__item"><a href="https://github.com/QuickSwap/QuickSwap-sdk" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub | SDK</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://gov.uniswap.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Governance</a></li><li class="footer__item"><a href="https://discord.gg/FCfyBSbCU5" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord</a></li><li class="footer__item"><a href="https://twitter.com/Uniswap" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li><li class="footer__item"><a href="https://uniswap.org/blog/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog</a></li></ul></div></div><div class="footer__bottom text--center"></div></div></footer></div>
<script src="/assets/js/runtime~main.a011c026.js"></script>
<script src="/assets/js/main.e22ba48b.js"></script>
</body>
</html>